@model UserViewModelBase

@using ContestantRegister.ViewModels
@{
    bool isUserTypeDisabled = Model?.IsUserTypeDisabled ?? false;
}

<div class="form-group">
    <label asp-for="UserType" class="control-label"></label>
    <select id="userType"
            onchange="checkUserType()"
            asp-for="UserType"
            asp-items="Html.GetEnumSelectList<UserType>()"
            class="form-control"
            disabled="@(isUserTypeDisabled ? "disabled" : null)">

    </select>
    <span asp-validation-for="UserType" class="text-danger"></span>
</div>
<div class="form-group">
    <label asp-for="Name" class="control-label"></label>
    <input asp-for="Name" class="form-control" />
    <span asp-validation-for="Name" class="text-danger"></span>
</div>
<div class="form-group">
    <label asp-for="Surname" class="control-label"></label>
    <input asp-for="Surname" class="form-control" />
    <span asp-validation-for="Surname" class="text-danger"></span>
</div>
<div class="form-group">
    <label asp-for="Patronymic" class="control-label"></label>
    <input asp-for="Patronymic" class="form-control" />
    <span asp-validation-for="Patronymic" class="text-danger"></span>
</div>
<div class="form-group" id="firstNameSection">
    <label asp-for="FirstName" class="control-label"></label>
    <input asp-for="FirstName" class="form-control" />
    <span asp-validation-for="FirstName" class="text-danger"></span>
</div>
<div class="form-group" id="lastNameSection">
    <label asp-for="LastName" class="control-label"></label>
    <input asp-for="LastName" class="form-control" />
    <span asp-validation-for="LastName" class="text-danger"></span>
</div>
<div class="form-group">
    <label asp-for="CityId" class="control-label"></label>
    <select asp-for="CityId" class="form-control" asp-items="ViewBag.CityId"></select>
    <span asp-validation-for="CityId" class="text-danger"></span>
</div>
<div class="form-group">
    <label asp-for="StudyPlaceId" class="control-label"></label>
    <select asp-for="StudyPlaceId" class="form-control" asp-items="ViewBag.StudyPlaceId"></select>
    <span asp-validation-for="StudyPlaceId" class="text-danger"></span>
</div>
@if (Model.CanSuggestStudyPlace)
{
    <div class="form-group">
        <p>Если вашего учебного заведения нет в списке, вы можете предложить администраторам сайта его добавить.</p>
        <p>Вы получите email уведомление, когда новое учебное закедение будет добавлено.</p>
        <p> <a id="suggestSchool" asp-controller="Home" asp-action="SuggestSchool">Предложить новую школу</a> </p>
        <p> <a id="suggestInstitution" asp-controller="Home" asp-action="SuggestInstitution">Предложить новый вуз/ссуз</a> </p>
    </div>
}
@*Student*@
<div class="form-group" id="educationStartDateSection">
    <label asp-for="EducationStartDate"></label>
    <input asp-for="EducationStartDate" class="form-control" type="date" />
    <span asp-validation-for="EducationStartDate" class="text-danger"></span>
</div>
<div class="form-group" id="educationEndDateSection">
    <label asp-for="EducationEndDate"></label>
    <input asp-for="EducationEndDate" class="form-control" type="date" />
    <span asp-validation-for="EducationEndDate" class="text-danger"></span>
</div>
<div class="form-group" id="dateOfBirthSection">
    <label asp-for="DateOfBirth"></label>
    <input asp-for="DateOfBirth" class="form-control" type="date" />
    <span asp-validation-for="DateOfBirth" class="text-danger"></span>
</div>

@*Trainer*@
<div class="form-group">
    <label asp-for="PhoneNumber"></label>
    <input asp-for="PhoneNumber" class="form-control" />
    <span asp-validation-for="PhoneNumber" class="text-danger"></span>
</div>

<input type="hidden" asp-for="IsUserTypeDisabled" />

<partial-script>
    <script type="text/javascript">
        function checkUserType() {
            var text = $("#userType option:selected").text();
            if (text == 'Школьник') {
                //$("educationStartDateSection").hide();
                //$("educationEndDateSection").hide();
                //$("dateOfBirthSection").hide();
                //$("firstNameSection").hide();
                //$("lastNameSection").hide();
                document.getElementById('educationStartDateSection').style.display = "none";
                document.getElementById('educationEndDateSection').style.display = "none";
                document.getElementById('dateOfBirthSection').style.display = "none";
                document.getElementById('firstNameSection').style.display = "none";
                document.getElementById('lastNameSection').style.display = "none";
                document.getElementById('suggestSchool').style.display = "block";
                document.getElementById('suggestInstitution').style.display = "none";
            }
            if (text == 'Студент') {
                //$("educationStartDateSection").show();
                //$("educationEndDateSection").show();
                //$("dateOfBirthSection").show();
                //$("firstNameSection").show();
                //$("lastNameSection").show();
                document.getElementById('educationStartDateSection').style.display = "block";
                document.getElementById('educationEndDateSection').style.display = "block";
                document.getElementById('dateOfBirthSection').style.display = "block";
                document.getElementById('firstNameSection').style.display = "block";
                document.getElementById('lastNameSection').style.display = "block";
                document.getElementById('suggestSchool').style.display = "none";
                document.getElementById('suggestInstitution').style.display = "block";
            }
            if (text == 'Тренер') {
                document.getElementById('educationStartDateSection').style.display = "none";
                document.getElementById('educationEndDateSection').style.display = "none";
                document.getElementById('dateOfBirthSection').style.display = "none";
                document.getElementById('firstNameSection').style.display = "block";
                document.getElementById('lastNameSection').style.display = "block";
                document.getElementById('suggestSchool').style.display = "block";
                document.getElementById('suggestInstitution').style.display = "block";
                //$("educationStartDateSection").hide();
                //$("educationEndDateSection").hide();
                //$("dateOfBirthSection").hide();
                //$("firstNameSection").show();
                //$("lastNameSection").show();
            }
        }

        $(document).ready(function () {

            //alert($("IsUserTypeDefined").checked());
            //if ($("IsUserTypeDefined").val() == "True") {
            //    $("UserType").disable();
            //}
            checkUserType();
        });

    </script>
</partial-script>
